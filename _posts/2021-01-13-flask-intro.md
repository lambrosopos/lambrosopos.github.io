---
layout: post
title: 내가 아는 Flask
categories: Tech
---

# 소개

이번에는 제가 알고 있는 Flask 에 대해서 얘기해 보겠습니다.

일단 제일 먼저 파이썬으로 시작한 웹 어플리케이션은 장고를 통해서 만들었습니다.
거대한 몸집으로 거의 대부분의 설정들을 손쉽게 다룰 수 있고 이미 틀이 주어졌던 장고는 신선했습니다.

보일러플레이트도 주어지고 관리자 페이지도 만들어져 있어서 내가 해야 하는 일에만 집중할 수 있는 시간이 되긴 했습니다.

하지만 아무리 좋은 선물을 많이 담아도 산타 할아버지를 제외하면 가져갈 수 없듯이(?) 장고의 단점은 바로 무거움이었습니다.
낄때마다 사용하지도 않는 부분들도 작동을 하고 있어 '굳이?' 라는 느낌을 들게 만들었습니다.

그리고 시간은 지나 2019년에 저는 flask 를 만나게 되었습니다.

사실 처음 접했을 때에 '이게 뭐지' 싶을 정도로 어플리케이션 하나 띄우는데 너무 간단했습니다.
그냥 `pip install flask` 를 한 뒤에 바로 코드 몇 줄을 적으면 끝.

장고를 접할 때에는 '다 해줘서 좋다 헤ㅔㅔㅎㅎㅎ' 이런 느낌이었다면 플래스크는 '작업 끄ㅡㅡㅡㅡㅌ' 이런 느낌이랄까?

이렇게까지 쉬워도 되나였습니다. 그도 그럴게 다음과 같은 코드로 어플리케이션 하나를 완성할 수 있습니다.

```python
from flask import Flask

app = Flask(__name__)

@app.route('/')
def index():
    return 'Hello world!'

if __name__ == "__main__":
    app.run(debug=True)
```

이렇게 꽤나 쉽게 완료할 수가 있습니다.

물론 인증, 블루프린트, 어플리케이션 팩토리 패턴, 데이터베이스, ORM 등등 다양한 기능들이 그냥 빠진 상태이지만 그래도 작동하는 flask 어플리케이션입니다.

이처럼 flask 는 정말 말 그대로 마이크로 프레임워크라 꽤나 유용하게 사용이 가능합니다.

# 신경쓸 부분들

제일 먼저 신경써야 하는 것은 자유가 주는 선택의 폭입니다.

자유롭게 작성할 수 있는 만큼, 최소한의 쇠사슬만 걸쳐 있는 만큼 사실 flask 를 '어떻게' 구조화 하는지는 사용자에 따라 다릅니다.
특히 Jinja2 와 함께 사용을 보통하기 때문에 (같은 저자임) 디자인 패턴이 MVC 패턴을 정확히 따르지는 못한다고 볼 수가 있죠.

물론 만들 수는 있습니다. 애초에 자유롭기 때문에. 하지만 flask 는 가벼움을 중시합니다. 사실 좀 스케일이 큰 어플리케이션을 만들거면 그냥 장고를 쓰는 게 맞는 것 같습니다.

어쨌든... 다음은 몇가지 신경써야 하는 부분입니다:
- 구조: 폴더 구조를 어떻게 구성할 것인가?
- 라우팅: 블루프린트를 어떻게 적절히 구현할 것인가?
- 데이터베이스: 연결을 어떻게 하며 데이터베이스 연결의 기능을 분리할 것인가?
- 어플리케이션 실행 방법: 어떻게 접근해서 어떤 방식으로 어플리케이션을 작동할 것인가?
- 환경변수: 개발/배포 환경에 따른 변수들은 어떻게 관리할 것인가?

등등 사실 더 있긴 한데 그 외에는 추가 서비스 기능들이 있다고 보시면 될 것 같습니다.

# Werkzeug

Flask, Jinja2, Werkzeug 는 모두 다 palletsproject 에 속하며 같은 사람이 코딩한 프로젝트들입니다. 따라서 셋의 호환성은 매우 뛰어납니다.
특히 Werkzeug 는 WSGI 라이브러리인데 flask 를 개발하는 단계에서 서버를 임시로 실행할 수 있게끔 간단한 WSGI HTTP Server 기능을 탑재했습니다.

Jinja2 는 Jinja 초기 버전과 달리 장고의 템플렛 방식을 더 따라했고 모던화를 했는데 Flask 를 설치할 때 자동으로 설치가 됩니다.

사실 템플렛 엔진들이 많지만 Flask 와 매끄럽게 작동을 하기 때문에 그 매력이 더 뛰어난 것 같습니다. `render_template` 과 같은 함수로 바로 이어지기도 하고 변수도 착착 넘겨줄 수 있다는 것은 플러스 점수인듯 합니다.

# 결론

별로 길지 않았던 글에서 제가 그냥 느꼈던 flask 에 대해서 적어봤는데 그냥 몇 번 flask 어플리케이션을 만들다 보니 이런저런 생각이 많이 들긴 합니다.

자유가 좋긴 한데 때로는 틀이 정해졌으면 개발에만 몰두할 수 있지 않을까라는 생각도 스치긴 합니다. 

만약에 짧은 시간 내에 가벼운 파이썬 어플리케이션을 만들겠다 하면 예를 들어 API 를 배포한다 한다면 나름 유용한 것 같습니다.
